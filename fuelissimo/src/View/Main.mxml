<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
		xmlns:s="library://ns.adobe.com/flex/spark" title="Main">
	
	<fx:Script>
		<![CDATA[
			import mx.core.IFlexDisplayObject;
			import mx.events.CloseEvent;
			import mx.managers.PopUpManager;
			
			import spark.components.TitleWindow;
			protected function disconnectHandler(event:MouseEvent):void
			{
				this.parentApplication.initApp();
			}
			
			protected function statisticsHandler(event:MouseEvent):void
			{
				// TODO Auto-generated method stub
				this.parentApplication.showStatisticsEnergy();
			}
			
			protected function fillUpHandler(event:MouseEvent):void
			{
				// TODO Auto-generated method stub
				this.parentApplication.showFillUp();
			}
			
			protected var ttlWndw:TitleWindow;
			
			protected function settingsChoiceHandler(event:MouseEvent):void
			{
				event.stopPropagation();
				event.stopImmediatePropagation();
				// TODO Auto-generated method stub
				ttlWndw = new TitleWindow();
				ttlWndw.title = "Email has been sent.";
				ttlWndw.width = this.parentApplication.width * 0.5;
				ttlWndw.height = 0;
				
				var generalSettingsButton:Button = new Button();
				generalSettingsButton.label = "General settings";
				generalSettingsButton.addEventListener(MouseEvent.CLICK, this.parentApplication.showSettings());
				ttlWndw.addElement(generalSettingsButton);
				
				var addACarButton:Button = new Button();
				addACarButton.label = "Add a car";
				//addACarButton.addEventListener(MouseEvent.CLICK, this.parentApplication.showAddACar1());
				ttlWndw.addElement(addACarButton);
				
				//	var popupMessage:Label = new Label();
				//popupMessage.text = "An email has been sent to the specified address.";
				//	popupMessage.
				//	ttlWndw.addElement(popupMessage);
				ttlWndw.addEventListener(CloseEvent.CLOSE, ttlWndw_close);
				ttlWndw.isPopUp = true;
				
				PopUpManager.addPopUp(ttlWndw, this, true);
				PopUpManager.centerPopUp(ttlWndw);
			}
			
			protected function ttlWndw_close(evt:CloseEvent):void {
				PopUpManager.removePopUp(evt.currentTarget as IFlexDisplayObject);
				this.parentApplication.initApp();
			}
			
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<!-- Placer ici les éléments non visuels (services et objets de valeur, par exemple). -->
	</fx:Declarations>
	<s:Label x="0" y="0" width="321" height="460"/>
	
	<s:Button id="manage" y="385" width="310" height="71" label="Manage your account"
			  click="settingsChoiceHandler(event)" fontSize="25" horizontalCenter="0"/>
	<s:Label y="6" width="312" height="69" color="#000000" fontFamily="Arial" fontSize="50"
			 fontWeight="bold" horizontalCenter="0" text="Fuelissimo" textAlign="center"
			 verticalAlign="middle"/>
	<s:Label y="68" right="18" color="#000000" fontSize="15" fontStyle="italic" fontWeight="bold"
			 text="Manage your fuel !"/>
	<s:Button id="fillUp" x="5" y="135" width="150" height="109" label="Fill up"
			  click="fillUpHandler(event)" fontSize="26"/>
	<s:Button id="stats" x="164" y="135" width="150" height="109" label="Statistics"
			  click="statisticsHandler(event)" fontSize="26"/>
	<s:Label x="150" y="105" color="#626262" fontFamily="Arial" fontSize="12" fontStyle="italic"
			  fontWeight="bold" text="Logged as Michel Kuhm"/>
	<s:Label x="15" y="261" text="Daily advice :"/>
	<s:Image x="292" y="99" width="20" height="20"
			  source="assets/fermer-croix-supprimer-erreurs-sortie-icone-4368-128.png"
			 	click="disconnectHandler(event)"/>
	<s:Label x="29" y="283" width="262" height="81" backgroundAlpha="0.7"
			  backgroundColor="#FFFFFF"
			  text="Reducing you speed by 10% &#xd;could let you save up to 15% of fuel."
			  verticalAlign="middle" />
	
	
</s:View>
