<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
		xmlns:s="library://ns.adobe.com/flex/spark" title="Main">
	
	<fx:Script>
		<![CDATA[
			import components.PopupHelpCar1;
			import components.PopupSettingsChooser;
			
			import mx.core.IFlexDisplayObject;
			import mx.events.CloseEvent;
			import mx.managers.PopUpManager;
			
			import spark.components.SkinnablePopUpContainer;
			import spark.components.TitleWindow;
			import spark.events.ViewNavigatorEvent;
			import components.PopupFilledUp;
			var popupF:PopupFilledUp = new PopupFilledUp();
			var popup:PopupSettingsChooser = new PopupSettingsChooser();
			
			public function initPopup():void
			{
				popup.addView(this);
			}
			// FIN code de la popup
			
			protected function disconnectHandler(event:MouseEvent):void
			{
				this.parentApplication.initApp();
			}
			
			protected function statisticsHandler(event:MouseEvent):void
			{
				// TODO Auto-generated method stub
				this.parentApplication.showStatisticsEnergy();
			}
			
			protected function fillUpHandler(event:MouseEvent):void
			{
				// TODO Auto-generated method stub
				this.parentApplication.showFillUp();
			}
			private var greyMaker:Label = new Label();

			protected function greyView():void
			{
				greyMaker.x = 0;
				greyMaker.y = 0;
				greyMaker.width = 321;
				greyMaker.height = 460;
				greyMaker.setStyle('backgroundColor', '#000000');
				greyMaker.setStyle('backgroundAlpha','0.5');
				greyMaker.addEventListener(MouseEvent.CLICK, greyDemakerView);
				this.addElement(greyMaker);
			}
			public function greyDemakerView(event:MouseEvent = null):void
			{
				popup.close();
				popupF.close();
				this.removeElement(greyMaker);
			}
			
			

			public function flashAlert():void
			{
				// flash 
				if (this.parentApplication.flashEnabled) 
				{
					greyView();
					popupF.open(this);
				}
				this.parentApplication.flashEnabled = false;
			}
						
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<!-- Placer ici les éléments non visuels (services et objets de valeur, par exemple). -->
	</fx:Declarations>
	<s:Label x="0" y="0" width="321" height="460" creationComplete="flashAlert()"/>

	<s:Image x="-52" y="56" width="424" height="272" smooth="true"
			 source="assets/Post-it-note-transparent.png"/>
	<s:Button id="fillUp" x="9" y="320" width="302" height="45" label="Save your fill up"
			  click="fillUpHandler(event)" color="#FFFFFF" fontFamily="Arial" fontSize="20"
			  fontWeight="normal" styleName="button"/>
	<s:Button id="stats" x="9" y="370" width="302" height="45" label="Review your Statistics"
			  click="statisticsHandler(event)" color="#FAFAFA" fontSize="20" fontWeight="normal"
			  styleName="button"/>

	<s:Label id="advice" x="71" y="85" height="33" fontSize="27" fontWeight="normal"
			 styleName="scriptFont" text="Daily advice &#xd;&#xd;"/>
	
	<s:Rect id="settingsBack" left="242" top="389" width="200" height="200" topLeftRadiusX="200">
		<s:filters>
			<s:DropShadowFilter color="0x000000" blurX="20" />
		</s:filters>
		<s:fill> 
			<s:SolidColor color="white" alpha="0.7"/>
		</s:fill>
		<!--<s:stroke>
			<s:SolidColorStroke  weight="2" color="#323232" joints="bevel" alpha=".5"/>   
		</s:stroke> -->
	</s:Rect>
	

	<s:Image x="277" y="418" width="36" height="36" backgroundAlpha="0"
			 click="greyView();popup.addView(this);popup.open(this)" smooth="true" smoothingQuality="high"
			 source="assets/_settings.png"/>
	<s:Label x="70" y="118" width="169" height="130" backgroundAlpha="0" fontSize="23"
			 fontWeight="normal" styleName="scriptFont"
			 text="Reducing your speed by 10% could let you save up to 15% of fuel."
			 textAlign="left" verticalAlign="middle"/>

	<s:Rect x="1" y="0" width="318" height="45" bottomLeftRadiusX="5" bottomRightRadiusX="5">
		<s:filters >
			<s:DropShadowFilter color="0x000000" blurX="20" />
		</s:filters>
		<s:fill> 
			<s:SolidColor color="#0C6707" alpha="1"/>
		</s:fill>
		<!--<s:stroke>
		<s:SolidColorStroke  weight="2" color="#323232" joints="bevel" alpha=".5"/>   
		</s:stroke> -->
	</s:Rect>
	<s:Rect id="settingsBack0" left="257" top="-53" width="186" height="98" bottomLeftRadiusX="50">
		<s:filters >
			<s:DropShadowFilter color="0x000000" blurX="20" />
		</s:filters>
		<s:fill> 
			<s:SolidColor color="white" alpha="0.7"/>
		</s:fill>
		<!--<s:stroke>
		<s:SolidColorStroke  weight="2" color="#323232" joints="bevel" alpha=".5"/>   
		</s:stroke> -->
	</s:Rect>
		
		<s:Image x="279" y="9" width="30" height="25" click="disconnectHandler(event)"
				 scaleMode="letterbox" smooth="true" backgroundAlpha="0"
				 source="assets/Logout-01.png" />
	<s:Label y="11" left="50" fontStyle="normal" fontWeight="normal" styleName="title"
			 text="Fuelissimo"/>

</s:View>
